% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tablr_create.R
\name{tab_sup}
\alias{tab_sup}
\title{Add supplementary columns or rows to a crosstab}
\usage{
tab_sup(
  data_or_tabs,
  sup_cols = NULL,
  sup_rows = NULL,
  only_first_level = TRUE,
  not_last_level = TRUE,
  sort_by = "no",
  drop_sup_na = FALSE,
  cleannames = FALSE,
  digits = 0L,
  print_sup = FALSE
)
}
\arguments{
\item{data_or_tabs}{An object of class \code{tabr} or \code{single_tabr}
made with \code{\link{tab}} or \code{\link{tabdraw}}, or a dataframe
of class \code{tabr_df} made with \code{\link{tabr_core}}.}

\item{sup_cols, sup_rows, print_sup}{A character vector of
supplementary column variables, or/and supplementary row variables.
They can be factor/character, but also numeric (in which case a
\code{\link[stats]{weighted.mean}} is calculated for all categories
of \code{var1}/\code{var2}). \code{sup_cols} and \code{sup_rows} won't
be printed in the results unless :
\itemize{
\item you pass the tabs to \code{\link{tabxl}}
\item you set print_sup to \code{TRUE} : it draws a table with all
principals AND supplementary variables (confusing and not recommended).
}}

\item{only_first_level, not_last_level}{By default, only the first
level of each supplementary variable is printed : it works well when there
is only two levels. When \code{only_first_level} is set to \code{FALSE},
the last level of each variable is still removed, because it usually brings
no more information. To take advantage of this feature,
use \code{\link[forcats]{fct_relevel}}
to place "negative" levels (expressing the lack of something) at the end.
To print all levels, also set \code{not_last_level} to \code{FALSE}.}

\item{sort_by}{A variable to sort rows in each table with. It must be one
of the principal or supplementary column variables.}

\item{drop_sup_na}{Set to \code{TRUE} to remove all individuals
with \code{NA} in at least one supplementary variable.}

\item{cleannames}{Set to \code{TRUE} to clean levels names, by removing
prefix numbers like "1-", and text in parenthesis.}

\item{digits}{The number of digits to print, as an integer.}
}
\value{
Tables with metadata to draw supplementary rows and colums with
\code{\link[tibble]{tabxl}}, or tables with printed supplementary rows/cols.
}
\description{
Add supplementary columns or rows to a crosstab
}
\examples{
forcats::gss_cat \%>\%
  dplyr::mutate(marital = forcats::fct_relevel(marital, "Married")) \%>\%
  tab(relig, race, perc = "row", rare_to_other = TRUE) \%>\%
  tab_sup(sup_cols = c("marital", "age", "tvhours"), print_sup = TRUE)
\dontrun{
forcats::gss_cat \%>\%
  dplyr::mutate(marital = forcats::fct_relevel(marital, "Married")) \%>\%
  tab(relig, race, perc = "row", rare_to_other = TRUE) \%>\%
  tab_sup(sup_rows = c("marital", "age", "tvhours")) \%>\%
  tabxl()
}
}
